{% extends 'clinical/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block head_block %}
{% endblock  %}
{% block body_block %}
 <!-- content -->
 <div class="page-wrapper">
    <div class="content">
    <div class="container">
      <div class="row" >
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
          <div class="page-header row" style="background-color:#25a5be">
            <h5 class="pageheader-title col-sm-4" style="color:white;margin-top:auto;margin-bottom:auto;">OPD Payment</h5>
            <div class="col-sm-8 text-right">
              <button class="border-0 p-2 icon-size" style="background-color:#25a5be;margin-right:1em;color:white;" form="MyForm">
                <i class="fa fa-save fa-2x"></i>
              </button>
              <a href=""style="background-color:#25a5be;color:red;" >
                <i class="fa fa-times fa-2x" aria-hidden="true"></i>
              </a>
          </div>
        </div>
    </div>
    </div><br>

<!-- Main Dashboard -->

<!-- Main Dashboard -->
  <form method="POST" id="MyForm" class="needs-validation" novalidate>
    {% csrf_token %}
      <input type="hidden" name="pay_m_visit_id" value="{{pay_m_visit_id}}" id="pay_m_visit_id" >
      <input type="hidden" name="pay_m_uhid" value="{{pay_m_uhid}}" id="pay_m_uhid">
      <input type="hidden" name="bill_no" value="{{pay_m_bill_no}}" id="pay_m_bill_no">
  <div class="form-row">
    <div class="col-md-3 mb-3"  id="amount1">
        <label>Billed Amount:</label>
        <input type="text" name="amount" id="receivable_amt" class="form-control" value="{{net_amount}}">
    </div>
      <div class="col-md-3 mb-3"  id="amount2">
        <label>Received Amount:</label>
        <input type="number" name="patient_paid_amts" value="0" id="received_amt" class="form-control">
    </div>
      <div class="col-md-3 mb-3"  id="amount3">
        <label>OutStanding Amount:</label>
        <input type="text" name="out_standing_amt"  id="outstanding_amt" class="form-control">
    </div>
  </div>

</form>
<script>
// Example starter JavaScript for disabling form submissions if there are invalid fields
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();
</script>
 <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
    $(document).ready(function () {
        $(document).on('keyup', '#received_amt', function () {
        var rec_amt = this.value;
        var recivable_amt=$('#receivable_amt').val();
        var amount = recivable_amt-rec_amt;
        $('#outstanding_amt').val(amount);
        });
       });
</script>


  </div>
</div>
{% endblock  %}
